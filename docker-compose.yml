version: '3.8'

services:
  ml_app:
    build:
      context: .
      dockerfile: docker/ml.Dockerfile
    volumes:
      - .:/app
    ports:
      - "8888:8888"  # Jupyter Lab
    environment:
      - PYTHONPATH=/app
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]  # Enable if you have NVIDIA GPU support
    command: jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root --NotebookApp.token=''

  cpp_app:
    build:
      context: .
      dockerfile: docker/cpp.Dockerfile
    volumes:
      - .:/app
    working_dir: /app
    command: /bin/bash
